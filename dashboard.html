<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>æˆ‘çš„è´¦æˆ· / My Account</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <h1>è´¦æˆ·æ¦‚è§ˆ / Account Dashboard</h1>

    <p>è´¦å·çŠ¶æ€ / Account Status:
      <span id="statusLight">ğŸŸ¢ æ´»è·ƒ / Active</span>
    </p>

    <p>IP: <span id="ipArea">è·å–ä¸­...</span></p>

    <h3>è´¦æˆ·ç»“æ„ / Account Structure</h3>
    <ul>
      <li>æˆ·å£ä¸€ / Account 1 (Locked) ğŸ”’ï¼š<span id="lockedFund">-</span> MYR</li>
      <li>æˆ·å£äºŒ / Account 2 (Flexible)ï¼š<span id="flexibleFund">-</span> MYR</li>
      <li>æ¯æ—¥çº¢åˆ© / Daily Bonusï¼š<span id="dailyBonus">-</span> MYR</li>
      <li>é¢å¤–çº¢åˆ© / Extra Bonusï¼š<span id="extraBonus">-</span> MYR</li>
      <li>ä½£é‡‘ / Commissionï¼š<span id="commission">-</span> MYR</li>
      <li>ç½šæ¬¾ / Penaltyï¼š<span id="penalty">-</span> MYR</li>
    </ul>

    <h3>USDT æ±‡ç‡ / USDT Rate</h3>
    <p>1 USDT = <span id="usdtRate">-</span> MYR</p>

    <h3>ç­¾ç½²çŠ¶æ€ / Agreement Status</h3>
    <p>å›½é™…å…¬çº¦ / Agreement:
      <span id="agreementStatus">å°šæœªç­¾ç½² / Not Signed</span>
      <a href="agreement.html" class="btn">ç­¾ç½² / Sign</a>
    </p>
    <p>å§”æ‰˜ä¹¦ / Proxy:
      <span id="proxyStatus">å°šæœªç­¾ç½² / Not Signed</span>
      <a href="proxy.html" class="btn">ç­¾ç½² / Sign</a>
    </p>

    <h3>ææ¬¾æ“ä½œ / Withdraw</h3>
    <a href="withdraw.html" class="btn">ç”³è¯·ææ¬¾ / Apply</a>
    <a href="bind-wallet.html" class="btn">ç»‘å®š USDT é’±åŒ… / Bind Wallet</a>

    <div class="notice" style="margin-top:30px; background:#f4f4f4; padding:15px; border-radius:6px;">
      <b>ææ¬¾è¯´æ˜ / Withdrawal Notice</b><br>
      â€¢ USDT ææ¬¾å°†åœ¨ <b>7 ä¸ªå·¥ä½œæ—¥</b> å†…åˆ°è´¦<br>
      â€¢ é©¬å¸ææ¬¾å°†åœ¨ <b>11 ä¸ªå·¥ä½œæ—¥</b> å†…åˆ°è´¦<br>
      <small>USDT withdrawals within 7 business days, MYR within 11 business days.</small>
    </div>
  </div>

  <script>
    const userId = 'user1'; // å®é™…æƒ…å†µåº”ä»ç™»å½•åç«¯ session è·å–

    fetch(`/api/account/${userId}`)
      .then(res => res.json())
      .then(data => {
        document.getElementById('lockedFund').innerText = data.lockedFund || '0.00';
        document.getElementById('flexibleFund').innerText = data.flexibleFund || '0.00';
        document.getElementById('dailyBonus').innerText = data.dailyBonus || '0.00';
        document.getElementById('extraBonus').innerText = data.extraBonus || '0.00';
        document.getElementById('commission').innerText = data.commission || '0.00';
        document.getElementById('penalty').innerText = data.penalty || '0.00';

        if (data.accountActive === false) {
          document.getElementById('statusLight').innerText = 'ğŸ”´ å°é” / Locked';
        }

        if (data.agreementSigned) {
          document.getElementById('agreementStatus').innerText = `âœ… å·²ç­¾ç½² / Signed (${data.agreementCode})`;
        }

        if (data.proxySigned) {
          document.getElementById('proxyStatus').innerText = `âœ… å·²ç­¾ç½² / Signed (${data.proxyCode})`;
        }
      });

    // è·å–å®¢æˆ·ç«¯ IPï¼ˆå¯æ”¹ä¸ºåç«¯å®æ—¶æä¾›ï¼‰
    fetch("https://ipapi.co/json/")
      .then(res => res.json())
      .then(ip => {
        document.getElementById("ipArea").innerText = `${ip.ip} - ${ip.country_name} ${ip.region}`;
      });

    // è·å– USDT æ±‡ç‡
    fetch("/api/usdt-rate")
      .then(res => res.json())
      .then(data => {
        document.getElementById("usdtRate").innerText = data.rate.toFixed(2);
      });
  </script>
</body>
</html>